
---
taxon: proof
date: November 06, 2024
author: [kokic](/trees/kokic.md)
---

注意到为使有效长度最大, 相应的二叉树中的右节点个数和回溯次数要尽可能多.
同时满足这两个要求意味着 $(i)$ 除根节点外至少有一个左结点 [^1]. $(ii)$
该二叉树必有一个位于根节点右侧的节点 [^2]. 如下图所示

[](./tree-three.typ#:block)

由此出发, 我们将剩余的所有 $n-3$ 个节点全部添加到树中唯一的左节点的右侧. 即

[](./tree-max.typ#:block)

下面我们只需算出 $\ell(M)$, 便可得到 $\ell_n$ 的最大值. 不妨直接写出 $h(M)$

[](./hm-evaluate.typ#:block)

立刻看出 $\ell(M) = 2 + 2(n-3) + (n-2) + 2 = 3n-4$.

[^1]: 如若不然, 这颗二叉树只会形如 `1010101`$\cdots$, 其长度为 $2n - 1$.

[^2]: 否则回溯贡献的长度便不是最大值 $n-2$.
